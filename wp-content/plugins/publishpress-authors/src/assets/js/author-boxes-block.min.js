(()=>{"use strict";function e(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var t,r,n,l,o,a,c,u,i,s,f,m,b;r=(t=window.wp).blocks.registerBlockType,n=t.element,l=n.useState,o=n.useEffect,a=t.blockEditor.InspectorControls,c=t.components,u=c.PanelBody,i=c.SelectControl,s=c.Spinner,f=c.Placeholder,m=t.editor.ServerSideRender,b=function(){return t.element.createElement(f,null,t.element.createElement(s,null))},r("publishpress-authors/author-boxes-block",{title:authorBoxesBlock.block_title,icon:"groups",category:"common",attributes:{selectedBoxId:{type:"string"}},example:{attributes:{selectedBoxId:""}},edit:function(r){var n=r.attributes,c=r.setAttributes,s=function(t,r){return function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,l,o,a,c=[],u=!0,i=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=o.call(r)).done)&&(c.push(n.value),c.length!==t);u=!0);}catch(e){i=!0,l=e}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(i)throw l}}return c}}(t,r)||function(t,r){if(t){if("string"==typeof t)return e(t,r);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?e(t,r):void 0}}(t,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(l([]),2),f=s[0],d=s[1],h=n.selectedBoxId;o(function(){fetch("".concat(authorBoxesBlock.ajax_url,"?action=ppma_block_fetch_author_boxes")).then(function(e){return e.json()}).then(function(e){d(e),!h&&0<e.length&&c({selectedBoxId:e[0].id})})},[]);var p=f.map(function(e){return{label:e.title,value:e.id}});return t.element.createElement(t.element.Fragment,null,t.element.createElement(a,null,t.element.createElement(u,{title:authorBoxesBlock.block_title},t.element.createElement(i,{label:authorBoxesBlock.select_label,value:h,options:p,onChange:function(e){return c({selectedBoxId:e})}}))),t.element.createElement(m,{block:"publishpress-authors/author-boxes-block",attributes:n,LoadingResponsePlaceholder:b}))},save:function(){return""}})})();